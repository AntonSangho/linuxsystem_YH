# Day 4: 파일 접근 관리

## 수업 개요

| 항목 | 내용 |
|------|------|
| 총 시간 | 5시간 |
| 교재 범위 | 파일 접근 관리 |
| 실습과제 | 파일/디렉토리 권한 설정 |

## 학습 목표

- 리눅스 파일 속성과 권한 체계 이해
- chmod 명령어를 통한 권한 변경 숙달

---

## 시간표

| 시간 | 내용 |
|------|------|
| 1h | 파일 속성 |
| 1h | 파일 접근 권한 종류 (읽기, 쓰기, 실행) |
| 1h | 접근권한 변경 명령: chmod |
| 1h | 기호/숫자를 이용한 권한 변경 |
| 1h | 실습과제 4 |

---

## 1. 파일 속성 (1시간)

### ls -l 출력 해석

```bash
ls -l file.txt
# -rw-r--r-- 1 ubuntu ubuntu 1234 Jan 30 10:00 file.txt
```

```
-rw-r--r-- 1 ubuntu ubuntu 1234 Jan 30 10:00 file.txt
│          │ │      │      │    │            │
│          │ │      │      │    │            └─ 파일명
│          │ │      │      │    └─ 수정 날짜
│          │ │      │      └─ 파일 크기 (바이트)
│          │ │      └─ 그룹
│          │ └─ 소유자
│          └─ 링크 수
└─ 파일 유형 및 권한
```

### 파일 유형

| 기호 | 유형 |
|------|------|
| `-` | 일반 파일 |
| `d` | 디렉토리 |
| `l` | 심볼릭 링크 |

### 권한 구조

```
-rw-r--r--
│└┬┘└┬┘└┬┘
│ │  │  └── 기타 사용자(Others) 권한
│ │  └───── 그룹(Group) 권한
│ └──────── 소유자(Owner) 권한
└────────── 파일 유형
```

---

## 2. 파일 접근 권한 종류 (1시간)

### 세 가지 권한

| 권한 | 기호 | 파일에서 | 디렉토리에서 |
|------|------|----------|--------------|
| 읽기 | r | 내용 읽기 | 목록 보기 (ls) |
| 쓰기 | w | 내용 수정 | 파일 생성/삭제 |
| 실행 | x | 실행 | 디렉토리 진입 (cd) |

### 권한 대상

| 대상 | 기호 | 설명 |
|------|------|------|
| 소유자 | u (user) | 파일을 만든 사용자 |
| 그룹 | g (group) | 소유자가 속한 그룹 |
| 기타 | o (others) | 그 외 모든 사용자 |
| 전체 | a (all) | 위 세 대상 모두 |

---

## 3. 접근권한 변경 명령: chmod (1시간)

### chmod 기본 문법

```bash
chmod [옵션] 권한 파일명
```

### 주요 옵션

| 옵션 | 설명 |
|------|------|
| `-R` | 하위 디렉토리까지 재귀적 적용 |

---

## 4. 기호를 이용한 권한 변경 (30분)

### 문법

```bash
chmod [대상][연산자][권한] 파일
```

### 연산자

| 연산자 | 설명 |
|--------|------|
| `+` | 권한 추가 |
| `-` | 권한 제거 |
| `=` | 권한 설정 (기존 권한 무시) |

### 예제

```bash
# 소유자에게 실행 권한 추가
chmod u+x script.sh

# 그룹에서 쓰기 권한 제거
chmod g-w file.txt

# 기타 사용자 읽기만 허용
chmod o=r file.txt

# 모두에게 읽기 권한 추가
chmod a+r file.txt

# 여러 권한 동시 변경
chmod u+x,g-w script.sh
```

---

## 5. 숫자를 이용한 권한 변경 (30분)

### 권한의 숫자 표현

| 권한 | 숫자 |
|------|------|
| r (읽기) | 4 |
| w (쓰기) | 2 |
| x (실행) | 1 |

### 계산 방법

```
rwx = 4 + 2 + 1 = 7
rw- = 4 + 2 + 0 = 6
r-x = 4 + 0 + 1 = 5
r-- = 4 + 0 + 0 = 4
--- = 0 + 0 + 0 = 0
```

### 자주 사용하는 권한 (실무)

| 숫자 | 기호 | 용도 |
|------|------|------|
| 755 | rwxr-xr-x | 실행 파일, 디렉토리 |
| 644 | rw-r--r-- | 일반 파일 |
| 600 | rw------- | SSH 키, 비밀 파일 |

### 예제

```bash
chmod 755 script.sh       # rwxr-xr-x
chmod 644 file.txt        # rw-r--r--
chmod 600 private.key     # rw-------
```

### 재귀적 권한 변경

```bash
chmod -R 755 mydir/       # 디렉토리와 모든 하위 항목
```

---

## 6. 실습과제 4: 파일 권한 설정 (1시간)

### 과제 목표

- 파일/디렉토리 권한 확인 및 변경
- 기호/숫자 방식 모두 연습

### 수행 단계

#### Part 1: 실습 환경 준비

```bash
cd ~
mkdir -p permission_lab
cd permission_lab
touch public.txt private.txt script.sh
```

#### Part 2: 권한 확인

```bash
ls -l
```

#### Part 3: 숫자로 권한 변경

```bash
chmod 644 public.txt      # 일반 파일
chmod 600 private.txt     # 비밀 파일
chmod 755 script.sh       # 실행 파일
ls -l
```

#### Part 4: 기호로 권한 변경

```bash
# 실행 권한 제거
chmod u-x script.sh
ls -l script.sh

# 실행 권한 다시 추가
chmod u+x script.sh
ls -l script.sh
```

#### Part 5: 스크립트 실행 테스트

```bash
# 스크립트 작성
echo '#!/bin/bash' > script.sh
echo 'echo "Hello, $USER!"' >> script.sh

# 실행 권한 없이 실행 시도
chmod 644 script.sh
./script.sh              # 실패

# 실행 권한 부여 후 실행
chmod 755 script.sh
./script.sh              # 성공
```

### 제출 내용

- `ls -l ~/permission_lab/` 결과 캡처
- 기호/숫자 방식으로 권한 변경한 명령어 정리

### 평가 기준

| 항목 | 배점 |
|------|------|
| 권한 확인 (ls -l 해석) | 30% |
| 숫자 방식 권한 변경 | 35% |
| 기호 방식 권한 변경 | 35% |

---

## 예상 질문 및 답변

### Q: 755와 644는 언제 사용하나요?
**A**: 755는 실행 파일이나 디렉토리에, 644는 일반 텍스트/설정 파일에 사용합니다.

### Q: 실행 권한 없이 스크립트를 실행할 수 있나요?
**A**: `bash script.sh`처럼 인터프리터를 명시하면 가능합니다. 하지만 `./script.sh`로 직접 실행하려면 x 권한이 필요합니다.

---

## 다음 수업 예고

**Day 5**: (교재 내용에 따라 결정)
